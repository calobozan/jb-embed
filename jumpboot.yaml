name: embed
version: 0.1.0
description: |
  Text embedding service using sentence-transformers.
  Converts text to dense vector representations for semantic search,
  similarity matching, and RAG applications.

capabilities:
  - generate text embeddings
  - batch embedding support
  - multiple model support
  - GPU accelerated

runtime:
  python: "3.11"
  mode: persistent
  entrypoint: main.py
  startup_timeout: 120
  packages:
    - sentence-transformers
    - torch

resources:
  gpu: true
  vram_gb: 2
  ram_gb: 4

health:
  method: health
  interval: 30
  failure_threshold: 3

rpc:
  methods:
    embed:
      description: "Generate embedding for a single text"
      input:
        type: object
        properties:
          text:
            type: string
            description: "Text to embed"
        required: [text]
      output:
        type: object
        properties:
          embedding:
            type: array
            description: "Dense vector representation"
          dimensions:
            type: integer

    embed_batch:
      description: "Generate embeddings for multiple texts"
      input:
        type: object
        properties:
          texts:
            type: array
            description: "List of texts to embed"
        required: [texts]
      output:
        type: object
        properties:
          embeddings:
            type: array
            description: "List of embeddings"
          count:
            type: integer

    info:
      description: "Get model information"
      input:
        type: object
        properties: {}
      output:
        type: object
        properties:
          model:
            type: string
          dimensions:
            type: integer

    health:
      description: "Health check"
      input:
        type: object
        properties: {}
      output:
        type: object
        properties:
          status:
            type: string
